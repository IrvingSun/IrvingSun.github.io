---
layout: post
title: 一篇关于室内定位技术的简单分享
category: 导航定位
tags: 室内定位
keywords: indoor positioning systems
description: a brief introduction about indoor positioning system
---

刘克强

室内定位是目前还是一个比较热的研究领域，也许是受到如火如荼的室外LBS（Location Based Services）的影响吧。科技巨头们一直在尝试，比如谷歌、百度和高德都在各自的地图产品中试水了室内地图和导航服务，苹果在前几年也把自己的iBeacon炒得很热，我国政府也很重视在这个领域的投入，比如十三五重点研发计划中在室内导航定位重点投入了三个项目（分别由武大、电科五十四所和北邮牵头）。

在室外条件下，高精度的位置获取往往依赖的是GNSS，但是由于GNSS在室内的使用存在局限，使得室内定位不得不思考其他方式。这是一件好事，使得室内定位领域创新的想法非常多，颇有“百花齐放”的味道，但是这同时也是一件坏事，目前没有一种很好的技术来“一统江山”，纷繁的技术种类也导致进入这个领域往往是费时费力，让很多有志青年无所适从。博主博士阶段主要从事室内定位领域中WiFi定位技术和机器学习在情景感知中的运用的研究，本文主要是对一些主要技术的总结和分类，以便读者参考使用。当然，这个领域已经有很多review类的文章，本文的内容肯定大同小异，但很多科技文献是针对已“入坑”同行或科研工作者的，本文尝试尽量以通俗的语言去描述，以方便理解。本文计划分成三个部分：（一）需求与方法概述；（二）方法分类阐述；（三）总结。

本着开源精神，欢迎转载和传播，但总结输出总是费时费力的，博主还是希望保留一点copyright，希望各位博客转载时请注明出处，学术引用请点击连接。

## （一）需求与方法概述

### 需求

为什么需要室内定位？这可能是每一个室内定位研究人员都要首先面对的问题，因为它关乎存在必要性。

回忆导航定位的探索历史，正是由于人类对“我在哪”、“我该怎么去到理想的远方”等问题的追逐，我们才学会了观天象、用司南，直到发明了全球卫星定位系统（GNSS，Global Navigation Satellite System，包括GPS/GLONASS/BDS/GALLEO）和电子地图。上述探索过程总的来说是发生在室外大尺度范围上的，比如从一个国家到另一个国家、一个城市到另一个城市，或者至少从城南到城北，从家到公司这种中等尺度上的，但实际上这类问题在小尺度的室内也存在，我们在室内环境中的活动，尤其是在大型场馆（如大型商超、博物馆、地下停车库）等陌生或不易辨别方向的环境中，也存在“我在哪”、“我该如何去到想要去的地方”这样的需求。

关于室内定位需求，这里不得不吐槽一个室内定位学界通用的论点，即“人类有90%时间是在室内度过的，因此也存在广泛的室内定位的需求”。先来喷一喷“人类有90%时间是在室内度过的”这个论据。按照我们目前的生活状态，这个论断本身很好理解，因为除了户外劳动者，大部分人的衣食住行中，除了“行”在室外，其他的需求基本都发生在室内环境中。然而，科研工作者们提出一个论点是要严谨的，是需要理论或数据支撑的，尤其是对毫无学术权威的科研民工们来说，所以有了室内定位界“著名”的90%这个学者们互相引证的数据。本着对一个事情刨根问底钻牛角尖的基本科研态度，本小工在网上查到这个数据来自于美国环境研究署的一份关于室内空气质量的报告，但事实上报告并没有详述这个数据的具体获得方法，而只是说“其他研究表明”，因此可信度并不高，杜撰的也未可知，所以“90%”在室内定位界“大放异彩”有点以讹传讹（互相引证，但不知最早来源是谁）的嫌疑。再来喷一喷后半段，也就是“因此也存在广泛的室内定位的需求”,因为在室内度过的时间长，所以需要室内定位，这个逻辑并不合理，比如我们在自己的家里待的时间可能会很长，但我们并不需要室内定位，但是，尽管我们仅仅只是“行”在室外，而在当前城市交通基础设施日趋复杂的条件下，如果是驾车出行，尤其是陌生的路线，没有室外导航定位的支持，是不容易的，所以定位的需求并没有因为我们在室外待得少就少用了，可见对定位的需求与度过的时间长短并没有直接关系。也就是说，我们的室内定位需求与在室内待的长短并没有因果关系，而是因为对室内环境陌生或环境过于复杂，导致我们仅仅凭经验是无法辨别方位和路线，需要额外的信息和工具辅助，而随着我们对室内环境的熟悉的递增，我们对室内定位的依赖是递减的，比如工作人员熟悉了环境之后可以自由活动，甚至不依赖工具做别人的向导。

然而至此，我们提出的需求都是关于人的，在机器智能逐渐取代人工的未来，位置感知是机器人们的必要感知，所以对“他”们来说，室内外无缝的、高精可靠的导航定位技术则是必须。

总结一下，我们之所以需要室内定位，一方面是人类在某些环境中需要额外的信息辅助辨别方位或导航，另一方面，室内高精定位对未来的机器人们来说则是必须。

### 方法

室外定位环境中，GNSS可以在开阔地带提供良好的定位精度，一般情况下，单点条件下（仅仅只有一个接收机，自行测距定位）可以达到数十米级的定位精度，如果辅以地基增强的差分改正，可以达到动态厘米级的定位精度，比如各省CORS，阿里千寻的FindCM。从室外到室内，一个自然而然的想法就是利用现有成熟的GNSS进行室内定位，但是由于存在一些局限，一般的GNSS并不能在室内取得良好的定位效果。GNSS利用的是超高频（GHz）无线电波，而高频率的无线电波在遇到阻挡时会快速衰减，使接收设备无法获取良好的信号条件，同时也会产生多路径效应，不利于解算直接视距路径上的距离，从而影响定位质量。也就是说，GNSS在某些环境下的工作会受影响，比如高楼旁、树荫下以及室内环境中。正是因为室内存在定位需求，然而成熟的GNSS技术又派不上用场，所以大致自20世纪90年代起，研究人员尝试了各种方法希望能满足室内导航定位需求，可谓“百家争鸣、百花齐放”，比如红外定位、超声波定位、WiFi定位、蓝牙定位、UWB定位、视觉定位等等。

一般某某定位方法是一种通用的说法，其逻辑结构大致可以用如下公式结构表示：
定位方法 = 信号类别 + 定位算法
这个公式中，信号类别是最多变的，而且多数定位系统是按照信号类别来进行分类的，如WiFi定位，蓝牙定位、惯性定位。但公式中的算法类型却有限，大致可分为几何定位、靠近感知和场景分析，因此这里先列出几种常用的定位算法的主要内容，以便后文讨论。

几何定位是一类最常用的定位算法，其包括距离交会、角度交会和航位推算。为了简化，利用二维平面几何来说明原理，如下图所示，有A、B、C三个点，其中C为目标定位点，在已知一些几何条件后，可以推算出C的位置：（1）若已知A、B的位置，并通过测量L1和L2两条边的距离确定C的位置，这样的方式即为距离交会；（2）若已知A、B的位置，并通过测量theta1和theta2两个角度确定C的位置，这样的方式即为角度交会；（3）若已知A的位置，并已知L1和theta1，或已知B的位置和L2及theta2，从而确定C的位置，这样的方式即为极坐标法，也是航位推算的原型。可见几何定位算法的原理有着严谨的几何数学基础，因此采用几何定位算法定位的精度完全受制于距离测量或角度测量的精度，当然这些几何条件都是推算的最小条件，关于如何利用冗余观测（各观测值都有误差）平差改善效果，就不在本文讨论范围之内啦。

<img src="/assets/img/20180503-1.png" width=240 height=205 />

上述几何定位中的距离测量方式有很多种，如果知道信号的飞行速度，只需要知道飞行时间就可以计算距离，如TOA（Time of Arrival，到达时间）测距。一般情况下，信号的飞行速度是容易知道的的，比如超声波或无线电波的速度都是光速是已知的，但飞行时间比较难以获取，因为涉及发射端和接收端时间同步，尤其在使用无线电波的定位系统中，速度太高，时间测量的精度必须要非常高才可以。例如，在无线电测距中，若时间差偏差了1纳秒（ns），距离将偏差0.3米（m）。为了降低时间同步成本，还有诸如TDOA（Time Difference of Arrival，到达时间差）、RSSI（Received Signal Strength Indicator，接收信号强度）测距、TWR（Two Way Ranging，双程测距）等算法，但在航位推算中，距离是通过加速度积分或累计步幅来实现的。对角度测量来说，一般利用无线电的方式是通过测量天线收发信号的角度来获取的，但在航位推算中，一般是通过陀螺仪积分或电子罗盘识别方位来实现的。

靠近感知是一类“懒人”的定位算法，也就是通过感知器感知目标，若感知到了目标，就确定目标在感知器周围，从而将感知器的位置设置为目标的位置。可想而知这样的算法的定位精度依赖于感知器的感知距离，感知距离越小精度越高，但这又与实际中定位方式的覆盖尺度存在矛盾，因为精度越高，就要求感知距离要越小，如果覆盖范围在要大的话，覆盖的密度就越高。

不同于靠近感知算法，场景分析算法又是一类“愚公”的定位算法，它一般存在两个步骤，即离线学习和在线定位，离线学习过程是定位之前建立目标环境中的场景数据库，将场景信息与位置关联起来，而在线定位过程是利用当前的场景信息数据和检索算法在场景数据库中寻找最佳匹配目标，从而获取定位点的位置。这类定位算法的精度依赖于场景数据库的精细程度和准确检索的能力。

以上就是常见的定位算法，按照之前的公式，我们可以解析一般的定位技术，如GNSS卫星导航定位，即为利用超高频无线电信号和几何定位算法（TOA）的定位方法，WiFi指纹定位算法即为利用超高频无线电信号和场景分析算法的定位方法。

## （二）方法分类阐述

目前室内定位系统非常多样，下文即对各类不同的定位系统和方法进行分开阐述，其中主要阐述各类方法中使用信号的类别、算法和优劣，由于此处非常繁杂，难免有遗漏或不当之处，欢迎批评指正。

#### 高灵敏度GNSS接收机

诚如前文所述，在室外GNSS定位如此成熟的条件下，在室内应用GNSS技术是一个非常自然的想法。由于在室内GNSS定位困难主要是信号衰减和多路径，因此要想在室内应用GNSS就必须迈过这两个坑，又由于GNSS是广播的定位方式（卫星只管发信号不管接收端），因此要改进的就是GNSS接收机检测微弱信号和多路径处理能力，也就是研制高灵敏度GNSS接收机。这个方向仍属于GNSS的研究，笔者了解不多，能查到的消息就是GNSS业内大公司如Qualcomm、Lucent、SIRF和uBLOX等，以及知名的Calgary大学都在这个方向进行了大量研究，然而，就目前GNSS在城市峡谷和遮挡环境下仍然存在困难的情况来看，这个方向的效果并不尽人意，或者如果存在相关的优秀产品，估计价格也不菲。

这里顺带扒一下辅助GNSS（Assisit-GNSS，A-GNSS），一些文章会把此类技术归类到室内定位中。GNSS定位时既需要接收机实时接收的测距信号，还需要已知一些辅助信息，比如天上的卫星在测距时刻的位置（星历），方可以进行位置解算，因此这部分辅助信息（包括星历和方位俯仰角等）可以通过蜂窝网络下载，而不用等待通过GNSS信号下载，可以缩短首次定位时间。因此，辅助GNSS主要的目的是改善GNSS的启动时间问题，也许在室内能接收到微弱GNSS信号时能获取低精度的定位结果，但这种技术并没有针对或解决室内定位主要矛盾，所以本文并没有归类进行单独阐述。

#### 伪卫星

室外效果好的GNSS在室内不好，我们能不能在局域或者室内环境中部署类似于GNSS卫星的基站，再利用测距进行定位呢？伪卫星的研究思路就是这样的！拿澳大利亚的Locata来说，它就是在地面上部署信号发射基站，然后发射类似GPS波段的无线电信号，并利用接收终端进行接收测距来定位的。据报道称Locata的工作距离可以达到50km，相当于建立了一个局域的GPS系统，可以避免一些卫星长距离传输带来的问题，尽管仍需面对室内阻挡和多径问题，但有评估称其精度可以达到厘米级。然而，这种定位方式仍然规避不了时钟同步的问题，因此其高昂的成本也可想而知，而且目前最重要的大众市场的终端——手机——无法具备工作能力，所以这种系统目前只是一些行业用户使用，比如Locata客户之一是NASA。

既然重新布系统成本高昂而且普通终端不能用，我们能不能直接部署GNSS的中继发射器呢，这样既能享受成熟的GNSS系统（如精密的原子钟）、信号体制和丰富的研究成果，还可以利用终端上的GNSS芯片资源，岂不是一举两得？这种方式原理上也是可行的，比如在屋顶部署GPS中继器，中继器的坐标可以通过GPS获取，中继放大后发射的GPS信号被终端接收到，这个过程的时间差就可以计算中继到终端的距离，通过多个中继就可以进行几何定位，但这种中继器如果功率太大，可能会干扰附近正常的GNSS终端的工作，所以这种方案一般是被政府限制使用的。

另外，这里还需要说一下日本的IMES（Indoor MEssaging System）。日本国内资源相对紧缺，所以各种地方都体现了节约的国民性，比如汽车的特点就是经济耐用，比如造GPS太费钱就造个QZSS，既能增强GPS性能还能做其他用途，再比如IMES，利用的是GPS相同的信号，希望最大限度地发挥终端上GPS芯片的价值。IMES实际并不测距，而是利用终端上的芯片来通信，通过布设的IMES基站广播经纬度和楼层信号，再通过终端接收基站信号并将基站位置定位为终端位置。可见这种定位方式使用的是靠近感知算法，其精度是受基站布设密度影响的，需要避免基站之间的干扰以及对正常的GPS设备的干扰。

#### 蜂窝

这里的蜂窝（Cellular）是指蜂窝通信网络，也就是我们使用的2G/3G/4G通信网络，以及即将要到来的5G网络。蜂窝名称的来历和硬件部署有关，出于通信的考虑，通信基站的部署既要保证通信质量，还要保证节约部署成本，因此运营商选择了有数学理论支撑的正六边形来部署基站，而这些正六边形放在一起看起来就像蜂窝。蜂窝定位的历史由来已久，美国联邦通信委员会（FCC）强制要求所有的无线业务提供商必须向E-911公共安全服务系统提供在67%的情况下、精度为125m的用户位置信息。蜂窝定位利用的就是通信信号和通信基站，因此可以使用的方法很多，几何定位、靠近感知以及场景分析都可以使用。使用蜂窝网定位，对用户干扰小，方便快捷，但就目前的情况而言，一般蜂窝网的定位精度在几十米、数百米甚至几公里，因此在室内场景下不太适用（一栋楼大小可能就几十米乘几十米）。

在即将到来的5G时代，5G白皮书将蜂窝网的定位能力描述为“在80%的场景下达到1—10米的定位精度”，可见前景十分美妙。小蜂窝作为5G的重要基础设施，在未来5G定位中一定会发挥重要作用，但如何克服类似产品——WiFi——已经在室内面对的困境，诸如阻挡、多径、同步等等问题，技术如何落地仍待观察。种种迹象表明，华为势必在5G中大有作为，而其对外披露的研究进展来看，可能在角度测量上会有所作为。另外，北邮曾提出过TC-OFDM信号体制，融合定位和通信信号，主要目的是通过卫星广播授时解决时间同步问题，形成高同步的通信信号，从而进行定位，据研究称该系统可以达到室内外广域的3米精度。

#### 视觉

视觉定位技术，主要是利用相机作为传感器，可见光做为定位信号的定位技术。利用一台相机（单目视觉）拍出来照片可以确定相机的视线和目标景物的夹角，这一点很容易理解，那如果利用两台相机（双目视觉）同时拍同一个目标景物势必可以获取两个夹角信息，如果再事先已知两个相机的相对信息，如视线的角度、二者之间的距离（基线）信息，即可以利用角度交会去定位。但是至此获取的是两个相机（中心）和目标物之间的相对位置，也就是相对定位结果，要想获取相机们的绝对位置，必须要已知目标物的绝对位置，这些目标物也就是所谓的参考。参考获取的方法有两类，一类是利用数据库进行匹配获取，另一类是利用标志，如logo、二维码、投影点（投影仪产生）等获取。利用数据库获取参考的方法需要事先建立定位场景的三维模型库或图像信息（特征）库，实时阶段通过相机拍摄的照片（特征）去检索数据库，获取照片中景物的绝对位置，从而确定相机的绝对位置。可见上述定位方法需要先运用场景分析算法，再利用视觉相对定位算法去反向定位终端，谷歌2017 I/O大会发布的VPS（Visual Positioning System）即利用上述原理。利用标志信息获取参考的方法，即利用相机拍摄标志信息从而获取标志处的绝对位置，进而通过视觉定位获取相机的绝对位置。需要指出的是，直接利用二维码解码可以直接进行位置标定，这与双目视觉定位中使用的方式不同。另外，视觉定位作为相对定位方式，是环境感知的重要方法，利用运动载体上的相机机和相片信息，可以获取载体的运动信息。

#### 红外

红外定位即利用红外波段的电磁波信号进行定位。红外线的利用方式包括主动红外和被动红外，主动红外指的是人工发射红外线，利用红外线进行角度或距离测量，被动红外指的是利用自然界中的红外线，如人体的热辐射就是一类红外光，通过红外相机来感知从而测角或测距。早期剑桥大学AT&T实验室发明的Active Badge是一款比较知名的利用红外线的主动定位产品，其精度可以达到米级，德国公司Ambiplex提出利用热辐射进行被动红外定位，其精度甚至达到了分米级。然而，红外线测量对视距要求比较高，但红外线穿透能力较弱因此易受阻挡，而且红外线容易受到干扰（比如太阳光），因此造成了红外线定位技术难以普及。另外，红外相机还可以通过主动发射红外投影用来感知景深，从而辅助前文所述的视觉定位。如微软的Xbox游戏机（Kinect）利用了红外相机去感知连续投影的结构化的红外线从而获取三维场景信息，配合使用双摄像头对用户的行为信息进行感知。

#### 激光

利用激光测距和测角精度都非常非常高，比如说测距能到微米级，测角能到0.001秒，获取如此高的精度也是需要高昂成本的，因此激光一般只在工业上运用比较广泛。工业上利用激光的历史已经比较长，如利用激光跟踪仪就可以确定目标的位置，跟踪仪关键部分主要包括干涉仪和两个角编码器（水平和垂直两个方向）。利用三维激光扫描仪能获取目标的点云（相对扫描仪的几何点）数据，测绘工作中可以用来对物体进行三维建模。激光雷达也是利用激光扫描的一类应用，可以快速地获取周围环境的激光点云数据，军事上可以用来对空域进行监测，而目前火热的无人驾驶研究中，激光雷达更是个中关键。室内定位中，比较典型的是iGPS，它是一类高精度的室内工业测量系统，实际上，从应用场景上与其说iGPS是室内定位，倒不如说是工业控制。所以，尽管激光精度非常高，但其在室内定位中应用并不广泛，主要的局限是成本，一个激光雷达此前的成本是几万美元，由于无人驾驶的驱动目前已经降到几千美元，但相对室内定位来说，成本仍然高昂，同时，目前大众市场的终端如何使用激光也存在局限。

尽管在室内定位领域激光应用受到局限，但在与此相关的室内制图领域，激光是一个重要的定位方式，如SLAM（Simultaneous Localization And Mapping）领域，不管是机器人，还是手推车和背包式，激光都是必须的手段。

#### 声学

不同于一般的无线电信号，声学是利用机械波信号。一般声学定位利用的超声波进行可以利用TOA原理测距，除此之外，还可以利用超声波和电磁波的飞行速度的差距，结合二者的时间差进行测距，或类似声呐的原理，通过双接收的到达时间差进行定位。类似于红外定位，超声波也可以分为主动设备和被动设备，主动设备即移动目标发射超声波信号，被动设备即锚点设备发射超声波信号。早期剑桥大学AT&T实验室发明过一个主动超声波设备的定位产品Active Bat，定位精度达到了厘米级，MIT实验室则利用被动超声波设备发明过一个定位系统叫Cricket，精度也达到了厘米级。虽然基于超声波的定位产品可以产生不错的定位精度，美国Sonitor甚至提供了商业的超声波定位方案，但是由于产品覆盖范围比较小，对视距要求比较高，而且部署成本也比较高，所以适用的场景有限。为了在大众市场能够使用超声波定位，有些研究人员还对手机麦克风进行了高频声波（声波频率在人耳听到的范围高频阈值附近）的定位方式进行了研究，在小范围内能够获得分米级的精度。

#### WiFi

说起WiFi不得不先说无线局域网（WLAN，Wireless Local Area Networks），WLAN技术就是通过射频通信来取代有线通信来构建局域网，其中局域网的概念涉及网络通信，可以理解为小范围的通信网络，如家、办公室等等建立的网络。WLAN中有很多通信协议标准，其中IEEE802.11系列标准应用广泛，被众多厂家支持，同时，这些厂家又成立了WiFi联盟来推动的IEEE802.11系统标准的应用，所以一般就用WiFi来表示这些标准并指代WLAN。利用WiFi信号可以进行几何定位，但是由于WiFi信号的时间分辨率的问题，利用WiFi来进行TOA/TDOA/TOA/AOA比较困难，涉及到物理层的操作，一般情况下，WiFi几何定位使用的是RSSI结合信号传播衰减模型进行反演测距，但由于无线信号在实际中易受干扰且自身存在波动，因此反演测距的精度并不高。在WiFi定位中，比较经典的是指纹定位，指纹定位的开山鼻祖是微软研究院提出的RADAR系统，而比较知名的商用系统包括Skyhook和Ekahau。WiFi指纹定位利用了场景分析的定位算法，需要事先建立环境中的RSSI指纹库，以供实际定位中使用，一般能够达到3-5米的定位精度，但是指纹库的构建是一个比较麻烦的先行问题，即使“硬着头皮”去采集了一个指纹库，由于无线信号的波动问题，指纹库会发生变化，还需要对这个指纹库进行维护和更新，否则定位的精度和稳定性无法保证。另外，不同厂商的WiFi模块测量出来的RSSI值可能会有所不同，因此指纹库使用中还需要考虑不同的设备适配问题。

#### UWB

UWB（Ultra Wideband，超宽带）技术是目前备受关注的一种新型短距离高速率无线通信技术，通过发送纳秒级或纳秒级以下的超窄脉冲来传输数据，可以获得GHz级的数据带宽。目前UWB实现方式有两种，一类是传统IR（Impulse Radio，冲激无线电）方式，另一类是MB-OFDM（Multiband-Orthogonal Frequency Division Multiplex，多频带正交频分复用）方式，目前一般使用的是IR方式。UWB可以实现TOA/TDOA/AOA以及TWR测距。由剑桥大学开发的Ubisence是早期UWB定位系统的代表，需要先在室内部署感应器，通过感应器感应室内物体携带的能够产生超宽带信号的电子标签来进行测距和测角，从而达到定位目的。Ubisense系统精度可以达到厘米级，但使用TDOA方法定位时，系统接收端需要时间同步，因此Ubisense设备价格昂贵，部署成本比较高。近年来，芯片级的UWB产品研发迅猛，芯片级产品多使用的是TWR测距，无需时间同步，而且终端可以自主解算。芯片厂商中比较出众的是2013年成立的Decawave，该公司于2014年发布DW1000芯片，该芯片在2015年室内定位大赛被多家参赛单位依赖或集成，并取得优异成绩。目前国内在该领域研究也比较火热，沃旭、精位、中电昆辰在各室内领域应用中崭露头角。

#### RFID

RFID（Radio Frequency IDentification，无线射频识别）是一种通过交变磁场或电磁场耦合的无线通信方式，RFID可利用射频信号实现非接触式进行双向通信，通过信号处理和信息传递即可进行标签识别。对RFID定位来说，TOA的实现是比较困难的，部分研究使用过其他算法，包括TDOA/AOA/POA（Phase of Arrival）以及RSSI场景分析，但多数情况下，RFID定位使用的是靠近感知算法。RFID系统可分为主动定位和被动定位，主动定位中标签是有电池的，可以扩展阅读器的感知距离（约至30m），而被动定位中标签是没有电池的，需要靠近阅读器（约2m）。SpotOn和LANDMARC是研究中具有较高影响力RFID定位系统。RFID最重要的优势是标签成本低，但受限于终端能力、定位精度和场景，目前使用范围有限，更多的趋势是回归识别本身。

#### 蓝牙/Zigbee

蓝牙和Zigbee都属于WPAN（Wireless Personal Area Network，无线个域网）的标准，但二者的针对不一样的需求的。蓝牙针对的是低功耗、低成本、高保密的通信需求，目前在鼠标、键盘、打印机、膝上型计算机、耳机和扬声器等硬件中应用广泛。Zigbee的主要特点是近距离、低复杂度、自组织、低功耗、低数据速率、低成本，主要适用于自动控制和远程控制领域，目前被广泛用于工业现场采集、智能家居、医疗护理和环境监测等领域。目前针对蓝牙和Zigbee标准的定位方法均有研究。其中，Apple公司针对蓝牙推出的iBeacon系统定位精度可达2~3米，主要利用算法是RSSI反演测距和RSSI指纹定位（场景分析）。尽管蓝牙功耗低，但不是没有功耗，所以基于蓝牙的Beacon仍然是需要耗电的，所以维护Beacon存在成本，而且随着功耗的降低，其产生的RSSI值也是在改变的，因此指纹也存在维护成本。从终端的角度，大众市场的典型终端——手机——在使用定位时需要打开蓝牙，而且蓝牙仅服务于定位，从体验的角度并不是很友好。就Zigbee而言，尽管有研究声称可以达到米级精度的定位效果，但Zigbee的标准目前还是主要应用在行业内，因此不利于该技术的推广。

#### 惯性导航

惯性导航系统是利用惯性元件来测量载体运动加速度，通过对加速度的积分运算，从而确定运载体位置。随着MEMS（Micro-Electro Mechanical System，微机电系统）技术的成熟，越来越多的低成本惯性测量单元IMU（Inertial Measurement Unit，主要含加速度计和陀螺仪，磁力计可选）被集成到移动计算平台上，由于利用积分运算的惯性定位对惯性器件要求较高，室内定位中多利用MEMS IMU进行PDR（Pedestrian Dead Reckon，行人航迹推算），其中主要利用加速度计来探测步数，再结合步长估计与航向估计，进行位置估计 。惯性测量完全自主、全天候、不受外界环境干扰影响，无信号丢失问题，适合室内定位应用，但室内PDR需要其他定位方式进行初始对准，并需要借助数字罗盘进行航向估计。目前手机PDR上方位获取精度较差，影响定位精度，同时行位推算计算量较大，因此实际应用中耗电也是一个比较棘手的问题。 

#### 磁场

磁场定位大致分为两类，一类是利用电磁线圈产出固定磁场，通过感知此类磁场来定位，另一类是直接利用地球磁场来定位，即地磁定位。人为产生磁场一般尺度比较小，应用在医疗领域较多，通常说的磁场定位，一般是指地磁定位。地球上许多生物可根据地磁进行导航定位，如鸽、刺龙虾等，类似于这些生物，地磁定位技术即根据所处环境的磁场分布来实现定位，由于无需使用其他辅助手段，是一种无源定位技术。目前利用地磁定位技术使用的方式包括两类，其一是先构建精确的地磁模型来描述整个地球不同位置的磁场分布，再在实际应用中根据实测值结合地磁模型来进行定位，另一类是利用场景识别的方式，即先构建区域内的磁场指纹，再在定位阶段利用实测数据与指纹匹配的方式进行定位。芬兰奥卢大学提出一种基于地磁的导航定位系统 Indoor Atlas，据报道该系统利用地磁场可达到 0.1-2 米的定位精度，目前百度已入股该公司。

#### 其他

正如前述，室内定位领域技术纷繁复杂，比如主张利用随机信号的方式，这些信号除了之前提到的蜂窝、WiFi、蓝牙等无线电信号，还包括数字电视、无绳电话、FM广播等等，但如何统一标准和落地确实也让人头疼。同时，这个纷争的江湖不仅群龙无首纷争不止，还不断有新技术被发明出来，比如利用LED灯的方式，可以提前标定LED灯的位置，并设置闪烁频率等属性，在定位阶段利用相机通过闪烁频率识别出当前LED灯，从而可以获取该灯的位置从而定位手机。

## （三）总结

在室内环境中，由于各类建筑结构和材料不一，室内空间和布置也存在较大的区别，而室内空间人类活动又十分频繁，因此环境复杂多变，不利于形成单一广域覆盖的系统。结合各类不同信号的优势，并利用不同的定位算法，室内定位研究领域形成了各类拥有各自不同特色的定位系统。按照前文所述，室内定位技术按照算法可分为几何定位、靠近感知、场景分析，而根据各类不同室内定位技术所使用的信号，可分为电磁信号、机械波信号和惯性信号。关于室内定位的总结，很多综述论文都从技术方面给出了小结，包括信号类型、算法类型和成本大小等，本文为了配合形式上的需要，也给出一张统计表。

![image](/assets/img/20180503-2.jpg){:height="60%" width="60%"}

但是，这张表信息仍然太多，很难让人产生深刻印象，其实总的来说，室内的特点就是结构复杂，信号多径效应明显，范围小，但对精度要求反而高，因此就目前的情况来说：如果选择电磁测距或测角，且设计专用基站和终端，成本高，需要解决多径和阻挡问题，适合行业用户；如果选择惯性测距或测角，且考虑使用高成本的专用设备，可以获取高精度，适合行业用户，如果选择惯性测距或测角，只考虑普通设备，可以获取一般精度，适合大众市场的辅助定位；如果选择指纹定位，且只考虑普通终端，定位成本较低，精度较高，可利用多径效应，但需要维护指纹库，适合大众市场。
